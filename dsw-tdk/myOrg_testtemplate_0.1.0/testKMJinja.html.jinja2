{# This is the template starter file generated by DSW TDK #}
{%- set km = ctx.knowledgeModel -%}
{%- set repliesMap = ctx.questionnaireReplies -%}

{#
##
##  TODO: Write the template
##  SEE: https://jinja.palletsprojects.com/templates/
##
##  ~~ Happy hacking! ~~
##
#}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>
    <div>

        {% for chapterUuid in km["entities"]["chapters"] %}
            <h1>{{ km["entities"]["chapters"][chapterUuid]["title"] }}</h1>

            {%- for questionUuid in km["entities"]["chapters"][chapterUuid]["questionUuids"] -%}
                {%- set question = km["entities"]["questions"][questionUuid] -%}

                <h2>{{ question["title"] }}</h2>
                <fieldset>
                <legend>{{ question["text"] }}</legend>

                {%- set reponse = repliesMap[chapterUuid + "." + questionUuid]["value"] -%}
                {% if reponse["type"] == "StringReply" %}
                    <p>{{ reponse["value"] }}</p>
                {% elif reponse["type"] == "MultiChoiceReply" %}
                    <p>C'est un questionnaire à choix multiples, l'affichage des réponses est fastidieu</p>
                {% endif %}

                </fieldset>
            {% endfor %}
        {% endfor %}

    </div>
</body>
</html>